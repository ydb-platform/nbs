{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "96_y-3f7VgXrqQ17QgqKW",
      "type": "text",
      "x": -2154.0102002724952,
      "y": -26379.357768900136,
      "width": 1684.7845458984375,
      "height": 180,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b47",
      "roundness": null,
      "seed": 925365945,
      "version": 937,
      "versionNonce": 1206930935,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390258613,
      "link": null,
      "locked": false,
      "text": "Nodes (inodes) can be created via CreateNode and CreateHandle requests. CreateHandle can\nlead to node creation if the E_CREATE flag is set (O_CREAT in POSIX). CreateHandle with\nE_CREATE works similarly to CreateNode so I'll focus on CreateNode here.\n",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Nodes (inodes) can be created via CreateNode and CreateHandle requests. CreateHandle can\nlead to node creation if the E_CREATE flag is set (O_CREAT in POSIX). CreateHandle with\nE_CREATE works similarly to CreateNode so I'll focus on CreateNode here.\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "tTFzormBYOqkziv8zLtHt",
      "type": "text",
      "x": -2160.6768669391613,
      "y": -26475.19110223347,
      "width": 244.72805786132812,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b4X",
      "roundness": null,
      "seed": 601441655,
      "version": 585,
      "versionNonce": 2143321465,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390004212,
      "link": null,
      "locked": false,
      "text": "Node creation",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Node creation",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "cDX6sx4ppMBP7eAaAFl0O",
      "type": "text",
      "x": -2158.6462476357756,
      "y": -27221.024435566807,
      "width": 1733.9166259765625,
      "height": 630,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b4c",
      "roundness": null,
      "seed": 2089743737,
      "version": 1941,
      "versionNonce": 1610626327,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735389991629,
      "link": null,
      "locked": false,
      "text": "Each inode is managed by a single tablet (shard or main tablet). Shards are\nin charge of regular inodes (i.e. files) by default but other kinds of inodes -\nmost importantly directories - can be created in shards if DirectoryCreationInShardsEnabled\nstorage config flag is enabled. \n\nRequests are routed to the right shard in TStorageServiceActor. Higher bits (default - 8 bits)\nof NodeId and HandleId store ShardNo - it's used to select the right shard. Without\nDirectoryCreationInShardsEnabled only CreateHandle w/o Name, DestroyHandle, WriteData,\nAddData, GenerateBlobIds, ReadData, DescribeData and GetNodeAttr w/o Name requests are\nsent directly to the right shard. All other requests - that is, mostly the requests that involve\nfile names - are sent to the main tablet first.\n\nIf DirectoryCreationInShardsEnabled is on, the shard that's in charge of the parent directory\nof the affected file plays the role of the main tablet (aka directory tablet).",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Each inode is managed by a single tablet (shard or main tablet). Shards are\nin charge of regular inodes (i.e. files) by default but other kinds of inodes -\nmost importantly directories - can be created in shards if DirectoryCreationInShardsEnabled\nstorage config flag is enabled. \n\nRequests are routed to the right shard in TStorageServiceActor. Higher bits (default - 8 bits)\nof NodeId and HandleId store ShardNo - it's used to select the right shard. Without\nDirectoryCreationInShardsEnabled only CreateHandle w/o Name, DestroyHandle, WriteData,\nAddData, GenerateBlobIds, ReadData, DescribeData and GetNodeAttr w/o Name requests are\nsent directly to the right shard. All other requests - that is, mostly the requests that involve\nfile names - are sent to the main tablet first.\n\nIf DirectoryCreationInShardsEnabled is on, the shard that's in charge of the parent directory\nof the affected file plays the role of the main tablet (aka directory tablet).",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "vgmyktp8NS2LZQveb7G84",
      "type": "rectangle",
      "x": -2135.6768669391613,
      "y": -26131.857768900136,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6b",
      "roundness": {
        "type": 3
      },
      "seed": 415886071,
      "version": 68,
      "versionNonce": 1610372439,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "hYAVl6EZDPF6YMyYRPXAN"
        },
        {
          "id": "2YGO9RhSsA7njh7P_IaUH",
          "type": "arrow"
        }
      ],
      "updated": 1735390288542,
      "link": null,
      "locked": false
    },
    {
      "id": "hYAVl6EZDPF6YMyYRPXAN",
      "type": "text",
      "x": -2103.5989708209972,
      "y": -26010.191102233468,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6c",
      "roundness": null,
      "seed": 998932055,
      "version": 22,
      "versionNonce": 530776855,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390246351,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "vgmyktp8NS2LZQveb7G84",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "VU1sfzOkx30rKSThtQYHo",
      "type": "rectangle",
      "x": -1376.5102002724943,
      "y": -26142.69110223347,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6d",
      "roundness": {
        "type": 3
      },
      "seed": 559800441,
      "version": 112,
      "versionNonce": 1699359639,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "Yozk0wqCXC2eLdGPM2erP"
        },
        {
          "id": "2YGO9RhSsA7njh7P_IaUH",
          "type": "arrow"
        }
      ],
      "updated": 1735390288542,
      "link": null,
      "locked": false
    },
    {
      "id": "Yozk0wqCXC2eLdGPM2erP",
      "type": "text",
      "x": -1252.2222364053068,
      "y": -26021.024435566804,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6e",
      "roundness": null,
      "seed": 530409817,
      "version": 78,
      "versionNonce": 1903999769,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390253716,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "VU1sfzOkx30rKSThtQYHo",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "nODsBOkvvxfSOwMet-lyZ",
      "type": "rectangle",
      "x": -1414.8435336058274,
      "y": -25754.357768900132,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6f",
      "roundness": {
        "type": 3
      },
      "seed": 1630644217,
      "version": 207,
      "versionNonce": 1981171673,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "WHssSNjD0PanouG-goINd"
        }
      ],
      "updated": 1735390306000,
      "link": null,
      "locked": false
    },
    {
      "id": "WHssSNjD0PanouG-goINd",
      "type": "text",
      "x": -1237.167561620964,
      "y": -25632.691102233464,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6g",
      "roundness": null,
      "seed": 1351368921,
      "version": 180,
      "versionNonce": 1133634745,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390306000,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "nODsBOkvvxfSOwMet-lyZ",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "LNrlIeUNEA-ZteeZ-JYyV",
      "type": "rectangle",
      "x": -1459.8435336058278,
      "y": -25717.69110223347,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6h",
      "roundness": {
        "type": 3
      },
      "seed": 2004493079,
      "version": 248,
      "versionNonce": 491185561,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "IJxzGPwXsi4IT_4Cd3MvE"
        }
      ],
      "updated": 1735390306000,
      "link": null,
      "locked": false
    },
    {
      "id": "IJxzGPwXsi4IT_4Cd3MvE",
      "type": "text",
      "x": -1282.1675616209645,
      "y": -25596.024435566804,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6i",
      "roundness": null,
      "seed": 1687398455,
      "version": 222,
      "versionNonce": 2120796793,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390306000,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "LNrlIeUNEA-ZteeZ-JYyV",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "IhUCci1KEL54Njj5DWy_x",
      "type": "rectangle",
      "x": -1513.176866939161,
      "y": -25667.691102233468,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6j",
      "roundness": {
        "type": 3
      },
      "seed": 590315929,
      "version": 233,
      "versionNonce": 800789337,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "TuyonPYCDrctk-A_Hj10y"
        }
      ],
      "updated": 1735390306000,
      "link": null,
      "locked": false
    },
    {
      "id": "TuyonPYCDrctk-A_Hj10y",
      "type": "text",
      "x": -1335.5008949542978,
      "y": -25546.0244355668,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6k",
      "roundness": null,
      "seed": 1960699513,
      "version": 207,
      "versionNonce": 361840697,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390306000,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "IhUCci1KEL54Njj5DWy_x",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "2YGO9RhSsA7njh7P_IaUH",
      "type": "arrow",
      "x": -1680.6768669391615,
      "y": -25991.857768900136,
      "width": 299.9999999999998,
      "height": 0,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6l",
      "roundness": {
        "type": 2
      },
      "seed": 291070807,
      "version": 56,
      "versionNonce": 759405593,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390302232,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          299.9999999999998,
          0
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "vgmyktp8NS2LZQveb7G84",
        "focus": -0.028901734104054413,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "VU1sfzOkx30rKSThtQYHo",
        "focus": -0.04624277456648201,
        "gap": 4.166666666667538,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "WKkQv7HRcu0IckTyJu5zS",
      "type": "text",
      "x": -1614.010200272495,
      "y": -26075.191102233464,
      "width": 207.01205444335938,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6m",
      "roundness": null,
      "seed": 1833508599,
      "version": 27,
      "versionNonce": 751168409,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390294413,
      "link": null,
      "locked": false,
      "text": "CreateNode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "CreateNode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "MIqYh-5sEzUf7t1McsFmg",
      "type": "text",
      "x": -2155.676866939162,
      "y": -25316.857768900136,
      "width": 1677.0966796875,
      "height": 270,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6n",
      "roundness": null,
      "seed": 1893605081,
      "version": 521,
      "versionNonce": 60393913,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390411282,
      "link": null,
      "locked": false,
      "text": "Shard selection takes place in TStorageServiceActor and, if ShardIdSelectionInLeaderEnabled\nstorage config flag is on, main tablet selects the shard as well and selection in the main\ntablet overrides the shard selected in TStorageServiceActor.\n\nSince ShardIdSelectionInLeaderEnabled is supposed to completely replace shard selection in\nTStorageServiceActor, this doc will focus on that mode.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Shard selection takes place in TStorageServiceActor and, if ShardIdSelectionInLeaderEnabled\nstorage config flag is on, main tablet selects the shard as well and selection in the main\ntablet overrides the shard selected in TStorageServiceActor.\n\nSince ShardIdSelectionInLeaderEnabled is supposed to completely replace shard selection in\nTStorageServiceActor, this doc will focus on that mode.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "FHwiSsUnYvIaF_rGK3ydp",
      "type": "rectangle",
      "x": -2117.7602002724943,
      "y": -24957.691102233468,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6o",
      "roundness": {
        "type": 3
      },
      "seed": 1924385655,
      "version": 95,
      "versionNonce": 503860407,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "Wf98QpYq0DjTlgH_ZEo7w"
        },
        {
          "id": "pCCu2_rQUtRG_w_Q6KqLo",
          "type": "arrow"
        }
      ],
      "updated": 1735390420681,
      "link": null,
      "locked": false
    },
    {
      "id": "Wf98QpYq0DjTlgH_ZEo7w",
      "type": "text",
      "x": -2085.6823041543303,
      "y": -24836.0244355668,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6p",
      "roundness": null,
      "seed": 792282263,
      "version": 50,
      "versionNonce": 384540119,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390420682,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "FHwiSsUnYvIaF_rGK3ydp",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "08-3QKZAsoZfPHhG1fSN8",
      "type": "rectangle",
      "x": -1358.5935336058278,
      "y": -24968.524435566796,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6q",
      "roundness": {
        "type": 3
      },
      "seed": 1794283959,
      "version": 140,
      "versionNonce": 1948473111,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "DFe6D_sc99Y4QYUXRWJs2"
        },
        {
          "id": "pCCu2_rQUtRG_w_Q6KqLo",
          "type": "arrow"
        },
        {
          "id": "RrAehDEKb3LZtcSO4Aahu",
          "type": "arrow"
        }
      ],
      "updated": 1735390437485,
      "link": null,
      "locked": false
    },
    {
      "id": "DFe6D_sc99Y4QYUXRWJs2",
      "type": "text",
      "x": -1234.3055697386403,
      "y": -24846.85776890013,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6r",
      "roundness": null,
      "seed": 1258572503,
      "version": 106,
      "versionNonce": 292337975,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390420682,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "08-3QKZAsoZfPHhG1fSN8",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "jcg77QJHlGZdw5dnJWG1C",
      "type": "rectangle",
      "x": -1633.5935336058274,
      "y": -24301.85776890013,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6s",
      "roundness": {
        "type": 3
      },
      "seed": 1543690231,
      "version": 260,
      "versionNonce": 163697239,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "_OyFy3X8S_pRYjYlxU_jb"
        }
      ],
      "updated": 1735390430677,
      "link": null,
      "locked": false
    },
    {
      "id": "_OyFy3X8S_pRYjYlxU_jb",
      "type": "text",
      "x": -1455.917561620964,
      "y": -24180.19110223346,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6t",
      "roundness": null,
      "seed": 603111703,
      "version": 234,
      "versionNonce": 144928631,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390430677,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "jcg77QJHlGZdw5dnJWG1C",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "m7YerIjpKVtZ7b1lmbGRk",
      "type": "rectangle",
      "x": -1678.5935336058278,
      "y": -24265.191102233464,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6u",
      "roundness": {
        "type": 3
      },
      "seed": 1950910007,
      "version": 302,
      "versionNonce": 1567341911,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "CAwk506K6dz9WBlHdzISx"
        },
        {
          "id": "RrAehDEKb3LZtcSO4Aahu",
          "type": "arrow"
        }
      ],
      "updated": 1735390437485,
      "link": null,
      "locked": false
    },
    {
      "id": "CAwk506K6dz9WBlHdzISx",
      "type": "text",
      "x": -1500.9175616209645,
      "y": -24143.524435566796,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6v",
      "roundness": null,
      "seed": 2078844759,
      "version": 276,
      "versionNonce": 2085174711,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390430677,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "m7YerIjpKVtZ7b1lmbGRk",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "dniZ7aZgPvNcU0LtDL82G",
      "type": "rectangle",
      "x": -1731.9268669391608,
      "y": -24215.191102233464,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6w",
      "roundness": {
        "type": 3
      },
      "seed": 422028407,
      "version": 286,
      "versionNonce": 1105620695,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "WL-Cd5WPm4EQfFJ9F1Ahx"
        }
      ],
      "updated": 1735390430677,
      "link": null,
      "locked": false
    },
    {
      "id": "WL-Cd5WPm4EQfFJ9F1Ahx",
      "type": "text",
      "x": -1554.2508949542976,
      "y": -24093.524435566796,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6x",
      "roundness": null,
      "seed": 1808399767,
      "version": 261,
      "versionNonce": 2063629303,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390430677,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "dniZ7aZgPvNcU0LtDL82G",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "pCCu2_rQUtRG_w_Q6KqLo",
      "type": "arrow",
      "x": -1662.7602002724952,
      "y": -24817.691102233468,
      "width": 299.9999999999998,
      "height": 0,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6y",
      "roundness": {
        "type": 2
      },
      "seed": 654586551,
      "version": 133,
      "versionNonce": 1976598361,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390421022,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          299.9999999999998,
          0
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "FHwiSsUnYvIaF_rGK3ydp",
        "focus": -0.028901734104054413,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "08-3QKZAsoZfPHhG1fSN8",
        "focus": -0.046242774566431534,
        "gap": 4.166666666667766,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "sYnU8q4AD0mlMqsdwJQ1-",
      "type": "text",
      "x": -1596.0935336058283,
      "y": -24901.024435566796,
      "width": 207.01205444335938,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b6z",
      "roundness": null,
      "seed": 595248087,
      "version": 54,
      "versionNonce": 2076013399,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390420682,
      "link": null,
      "locked": false,
      "text": "CreateNode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "CreateNode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "RrAehDEKb3LZtcSO4Aahu",
      "type": "arrow",
      "x": -1147.3435336058283,
      "y": -24678.5244355668,
      "width": 296.6666666666665,
      "height": 413.3333333333321,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b70",
      "roundness": {
        "type": 2
      },
      "seed": 590162487,
      "version": 29,
      "versionNonce": 1576426551,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390437485,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -296.6666666666665,
          413.3333333333321
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "08-3QKZAsoZfPHhG1fSN8",
        "focus": -0.26715263254075033,
        "gap": 1.6666666666606034,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "m7YerIjpKVtZ7b1lmbGRk",
        "focus": -0.2912343397835601,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "jLbU6tPxdZMWWFVs6chTe",
      "type": "text",
      "x": -1224.0102002724948,
      "y": -24531.857768900136,
      "width": 845.9642333984375,
      "height": 135,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b71",
      "roundness": null,
      "seed": 404162743,
      "version": 231,
      "versionNonce": 504377433,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390485788,
      "link": null,
      "locked": false,
      "text": "Selects one of the shards in a round-robin-like\nmanner, but takes the amount of free space in\neach shard into account",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Selects one of the shards in a round-robin-like\nmanner, but takes the amount of free space in\neach shard into account",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "9x7I4lF3jUt9WkHjO46ij",
      "type": "rectangle",
      "x": -2003.0339836383796,
      "y": -23679.357768900132,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b74",
      "roundness": {
        "type": 3
      },
      "seed": 602513049,
      "version": 263,
      "versionNonce": 1261891993,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "dJte6ZDVlyCjbdM4CUDXr"
        },
        {
          "id": "ocRIxsnt8g21h7UoxVbFf",
          "type": "arrow"
        }
      ],
      "updated": 1735390581965,
      "link": null,
      "locked": false
    },
    {
      "id": "dJte6ZDVlyCjbdM4CUDXr",
      "type": "text",
      "x": -1878.746019771192,
      "y": -23557.691102233464,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b75",
      "roundness": null,
      "seed": 1917608825,
      "version": 227,
      "versionNonce": 658460281,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390539826,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "9x7I4lF3jUt9WkHjO46ij",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "mLxNlBJCk_VNqIPo9kLw6",
      "type": "rectangle",
      "x": -1816.3673169717126,
      "y": -23269.357768900136,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b78",
      "roundness": {
        "type": 3
      },
      "seed": 1959594521,
      "version": 509,
      "versionNonce": 290772823,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "9CKyCXk_CI3T5cs6hSwLn"
        }
      ],
      "updated": 1735390657802,
      "link": null,
      "locked": false
    },
    {
      "id": "9CKyCXk_CI3T5cs6hSwLn",
      "type": "text",
      "x": -1638.6913449868493,
      "y": -23147.691102233468,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b79",
      "roundness": null,
      "seed": 985030393,
      "version": 483,
      "versionNonce": 294507639,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390657802,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "mLxNlBJCk_VNqIPo9kLw6",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ZfvYj3AQkdPQnWgBpyc9z",
      "type": "text",
      "x": -2117.3435336058283,
      "y": -23816.857768900132,
      "width": 1635.696533203125,
      "height": 90,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7G",
      "roundness": null,
      "seed": 600787065,
      "version": 290,
      "versionNonce": 146342455,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390734329,
      "link": null,
      "locked": false,
      "text": "Ok, so a shard was selected, now let's focus on the main tablet + shard pair. Main tablet\ngenerates NodeNameInShard - simply as a GUID.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Ok, so a shard was selected, now let's focus on the main tablet + shard pair. Main tablet\ngenerates NodeNameInShard - simply as a GUID.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ocRIxsnt8g21h7UoxVbFf",
      "type": "arrow",
      "x": -1540.6768669391615,
      "y": -23541.857768900136,
      "width": 483.33333333333326,
      "height": 3.3333333333321207,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7H",
      "roundness": {
        "type": 2
      },
      "seed": 1574909271,
      "version": 79,
      "versionNonce": 1264957463,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390655950,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          483.33333333333326,
          -3.3333333333321207
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "9x7I4lF3jUt9WkHjO46ij",
        "focus": -0.034630943290554494,
        "gap": 7.357116699218182,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "wmeyr9YbiXcHq4X_aZATz",
        "focus": 0.3403170158507822,
        "gap": 3.333333333333485,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "Vip08vWOM4AjiSzJD9AlR",
      "type": "text",
      "x": -1512.343533605828,
      "y": -23626.857768900136,
      "width": 432.35614013671875,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7I",
      "roundness": null,
      "seed": 1584415703,
      "version": 46,
      "versionNonce": 295205177,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390577062,
      "link": null,
      "locked": false,
      "text": "LocalDB CreateNode tx",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "LocalDB CreateNode tx",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "wmeyr9YbiXcHq4X_aZATz",
      "type": "rectangle",
      "x": -1054.0102002724948,
      "y": -23696.857768900136,
      "width": 446.6666666666665,
      "height": 456.66666666666424,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7J",
      "roundness": {
        "type": 3
      },
      "seed": 2101071897,
      "version": 44,
      "versionNonce": 854732983,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "Lnn6QCOQmNvdzhjKcSZWT"
        },
        {
          "id": "ocRIxsnt8g21h7UoxVbFf",
          "type": "arrow"
        }
      ],
      "updated": 1735390655716,
      "link": null,
      "locked": false
    },
    {
      "id": "Lnn6QCOQmNvdzhjKcSZWT",
      "type": "text",
      "x": -1044.8109306598647,
      "y": -23603.524435566804,
      "width": 428.26812744140625,
      "height": 270,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7JV",
      "roundness": null,
      "seed": 1531523287,
      "version": 185,
      "versionNonce": 1692204279,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390649885,
      "link": null,
      "locked": false,
      "text": "1. Modifies NodeRefs\nand DupCache, but not\nNodes\n2. Appends CreateNode\nin shard request to the\nOpLog table",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "wmeyr9YbiXcHq4X_aZATz",
      "originalText": "1. Modifies NodeRefs and DupCache, but not Nodes\n2. Appends CreateNode in shard request to the OpLog table",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "FJv6TGObTftt7QjdgS1JJ",
      "type": "text",
      "x": -2117.141100337599,
      "y": -22909.357768900136,
      "width": 1524.528564453125,
      "height": 90,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7L",
      "roundness": null,
      "seed": 1229910999,
      "version": 480,
      "versionNonce": 2011036345,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390702784,
      "link": null,
      "locked": false,
      "text": "Now we have a Name in NodeRefs for this file and we have a CreateNode request in\nthe OpLog table. Time to create the node in the shard.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Now we have a Name in NodeRefs for this file and we have a CreateNode request in\nthe OpLog table. Time to create the node in the shard.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "kDyc159tXKG14PPAtchMv",
      "type": "rectangle",
      "x": -2011.8554252887704,
      "y": -22733.94110223346,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7M",
      "roundness": {
        "type": 3
      },
      "seed": 1434673785,
      "version": 323,
      "versionNonce": 1878450967,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "VgGr4Fx4CF9jK_sDAx10q"
        },
        {
          "id": "c5vGiuA_Bwb883_X09sTa",
          "type": "arrow"
        }
      ],
      "updated": 1735390772413,
      "link": null,
      "locked": false
    },
    {
      "id": "VgGr4Fx4CF9jK_sDAx10q",
      "type": "text",
      "x": -1887.567461421583,
      "y": -22612.274435566793,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7N",
      "roundness": null,
      "seed": 2009246553,
      "version": 286,
      "versionNonce": 1601554329,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390747936,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "kDyc159tXKG14PPAtchMv",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "9ob1YLzfkqIzeWensqFNK",
      "type": "rectangle",
      "x": -1825.1887586221035,
      "y": -22322.2744355668,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7O",
      "roundness": {
        "type": 3
      },
      "seed": 686151737,
      "version": 569,
      "versionNonce": 1732407161,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "mq49SIyZZC18WKSXqTTbB"
        },
        {
          "id": "c5vGiuA_Bwb883_X09sTa",
          "type": "arrow"
        }
      ],
      "updated": 1735390883480,
      "link": null,
      "locked": false
    },
    {
      "id": "mq49SIyZZC18WKSXqTTbB",
      "type": "text",
      "x": -1647.5127866372402,
      "y": -22200.607768900132,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7P",
      "roundness": null,
      "seed": 718301465,
      "version": 543,
      "versionNonce": 2014845017,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390883480,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "9ob1YLzfkqIzeWensqFNK",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "c5vGiuA_Bwb883_X09sTa",
      "type": "arrow",
      "x": -1784.0102002724948,
      "y": -22446.857768900136,
      "width": 170.95720710101614,
      "height": 121.66666666666788,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7U",
      "roundness": {
        "type": 2
      },
      "seed": 1625401623,
      "version": 51,
      "versionNonce": 906339641,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390883481,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          170.95720710101614,
          121.66666666666788
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "kDyc159tXKG14PPAtchMv",
        "focus": 0.4681564677119862,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "9ob1YLzfkqIzeWensqFNK",
        "focus": 0.44482406952459513,
        "gap": 2.9166666666678793,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "tkS3WPWG79oRTOyNcSjTK",
      "type": "text",
      "x": -1630.6768669391615,
      "y": -22410.191102233464,
      "width": 207.01205444335938,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7W",
      "roundness": null,
      "seed": 1045285271,
      "version": 28,
      "versionNonce": 1966411737,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390767902,
      "link": null,
      "locked": false,
      "text": "CreateNode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "CreateNode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "YoavvZHVbDjP_jTeRnnYg",
      "type": "text",
      "x": -2116.274482499057,
      "y": -21945.19110223347,
      "width": 1434.66455078125,
      "height": 90,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7X",
      "roundness": null,
      "seed": 2010525015,
      "version": 724,
      "versionNonce": 117138679,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390823077,
      "link": null,
      "locked": false,
      "text": "If CreateNode request succeeds in shard, main tablet removes the OpLog entry\nand responds to the client.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "If CreateNode request succeeds in shard, main tablet removes the OpLog entry\nand responds to the client.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "Dc_oh76QW-FXmd1BCQ1On",
      "type": "rectangle",
      "x": -2014.8435336058283,
      "y": -21767.691102233464,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7Y",
      "roundness": {
        "type": 3
      },
      "seed": 2080975481,
      "version": 389,
      "versionNonce": 624109655,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "iW4fUj7oNeGSGTt47viRf"
        },
        {
          "id": "TrQWABc-AlXPDa0arVU8f",
          "type": "arrow"
        },
        {
          "id": "4aolUjqr16Llxdsotv81M",
          "type": "arrow"
        }
      ],
      "updated": 1735390896907,
      "link": null,
      "locked": false
    },
    {
      "id": "iW4fUj7oNeGSGTt47viRf",
      "type": "text",
      "x": -1890.555569738641,
      "y": -21646.024435566796,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7Z",
      "roundness": null,
      "seed": 1515156313,
      "version": 352,
      "versionNonce": 290735127,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390839261,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "Dc_oh76QW-FXmd1BCQ1On",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ukxR-WF6sW2oRAm16LeNm",
      "type": "rectangle",
      "x": -1233.176866939161,
      "y": -21804.35776890014,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7a",
      "roundness": {
        "type": 3
      },
      "seed": 781819961,
      "version": 672,
      "versionNonce": 1975962807,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "N9js-1UVuAw1A7ZcdxtQm"
        },
        {
          "id": "TrQWABc-AlXPDa0arVU8f",
          "type": "arrow"
        }
      ],
      "updated": 1735390844631,
      "link": null,
      "locked": false
    },
    {
      "id": "N9js-1UVuAw1A7ZcdxtQm",
      "type": "text",
      "x": -1212.8129143024426,
      "y": -21727.69110223347,
      "width": 414.2720947265625,
      "height": 135,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7b",
      "roundness": null,
      "seed": 1456156953,
      "version": 699,
      "versionNonce": 2076488697,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390877156,
      "link": null,
      "locked": false,
      "text": "1. Removes OpLog entry\n2. Patches DupCache\nentry",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "ukxR-WF6sW2oRAm16LeNm",
      "originalText": "1. Removes OpLog entry\n2. Patches DupCache entry",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "TrQWABc-AlXPDa0arVU8f",
      "type": "arrow",
      "x": -1556.9983085895528,
      "y": -21628.941102233468,
      "width": 320.90477498372775,
      "height": 49.075060678111186,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7c",
      "roundness": {
        "type": 2
      },
      "seed": 676832761,
      "version": 335,
      "versionNonce": 781356537,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390849574,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          320.90477498372775,
          -49.075060678111186
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "Dc_oh76QW-FXmd1BCQ1On",
        "focus": 0.16657229442814267,
        "gap": 2.845225016275549,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "ukxR-WF6sW2oRAm16LeNm",
        "focus": 0.29650616059294,
        "gap": 2.916666666664014,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "glzqjy6aNb3omkcLqoX2B",
      "type": "text",
      "x": -1499.0102002724948,
      "y": -21728.5244355668,
      "width": 208.65206909179688,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7e",
      "roundness": null,
      "seed": 827671705,
      "version": 22,
      "versionNonce": 1540495927,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390860912,
      "link": null,
      "locked": false,
      "text": "LocalDB tx",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "LocalDB tx",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "ml0bqDJOkUE-ORzYdiLc5",
      "type": "rectangle",
      "x": -2026.510200272495,
      "y": -21316.024435566807,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7f",
      "roundness": {
        "type": 3
      },
      "seed": 1340382487,
      "version": 599,
      "versionNonce": 321404567,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "f9B70wmVH_1oNrB5-9yPH"
        },
        {
          "id": "4aolUjqr16Llxdsotv81M",
          "type": "arrow"
        }
      ],
      "updated": 1735390896907,
      "link": null,
      "locked": false
    },
    {
      "id": "f9B70wmVH_1oNrB5-9yPH",
      "type": "text",
      "x": -1994.432304154331,
      "y": -21194.35776890014,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7g",
      "roundness": null,
      "seed": 2107564599,
      "version": 597,
      "versionNonce": 596513687,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735390891102,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "ml0bqDJOkUE-ORzYdiLc5",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "4aolUjqr16Llxdsotv81M",
      "type": "arrow",
      "x": -1790.6768669391615,
      "y": -21480.191102233468,
      "width": 25,
      "height": 170,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7h",
      "roundness": {
        "type": 2
      },
      "seed": 1035033047,
      "version": 39,
      "versionNonce": 393872759,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390896907,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -25,
          170
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "Dc_oh76QW-FXmd1BCQ1On",
        "focus": -0.07135113826746563,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "ml0bqDJOkUE-ORzYdiLc5",
        "focus": -0.1488124568838036,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "5aQ0WVmCdzctrTOkfFOyf",
      "type": "text",
      "x": -1770.6768669391615,
      "y": -21423.5244355668,
      "width": 364.404052734375,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7i",
      "roundness": null,
      "seed": 427386329,
      "version": 33,
      "versionNonce": 41813335,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735390904665,
      "link": null,
      "locked": false,
      "text": "CreateNodeResponse",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "CreateNodeResponse",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "iDVh7Ucm1CzKcqwcgvOvU",
      "type": "text",
      "x": -2136.3424756631202,
      "y": -20965.191102233464,
      "width": 1647.5765380859375,
      "height": 135,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7j",
      "roundness": null,
      "seed": 133058743,
      "version": 1039,
      "versionNonce": 1941596343,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393479845,
      "link": null,
      "locked": false,
      "text": "If CreateNode in shard request fails, it's retried until it succeeds. If main tablet reboots,\nit reads OpLog into its memory and again retries all shard requests until they\nsucceed.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "If CreateNode in shard request fails, it's retried until it succeeds. If main tablet reboots,\nit reads OpLog into its memory and again retries all shard requests until they\nsucceed.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "MKKXyvmAgWLpPZ7TtUPbk",
      "type": "text",
      "x": -2141.374229203159,
      "y": -20787.691102233464,
      "width": 827.67626953125,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7k",
      "roundness": null,
      "seed": 1347291799,
      "version": 650,
      "versionNonce": 1215648569,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735391022522,
      "link": null,
      "locked": false,
      "text": "Node creation: special case - hardlink creation",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Node creation: special case - hardlink creation",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "jg2xWZOlrcA08Nw9qBhG6",
      "type": "text",
      "x": -2128.7963941201506,
      "y": -20702.69110223347,
      "width": 1568.196533203125,
      "height": 405,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7l",
      "roundness": null,
      "seed": 1966543321,
      "version": 1780,
      "versionNonce": 72986711,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392494543,
      "link": null,
      "locked": false,
      "text": "Hardlinks are pretty rare and we took a simplified non-transactional approach to their\nimplementation in a sharded filesystem. And added a TODO to make a proper\nimplementation =)\n\nHardlink creation involves multiple steps which are performed in TStorageServiceActor,\nnot in the main tablet => no transaction. The drawback here is that in rare cases\nwe can leave garbage hardlinks which are invisible to the user but which prevent\nactual inode deletion and thus some free space may become lost (until we manually call\nfilestore-client findgarbage).",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Hardlinks are pretty rare and we took a simplified non-transactional approach to their\nimplementation in a sharded filesystem. And added a TODO to make a proper\nimplementation =)\n\nHardlink creation involves multiple steps which are performed in TStorageServiceActor,\nnot in the main tablet => no transaction. The drawback here is that in rare cases\nwe can leave garbage hardlinks which are invisible to the user but which prevent\nactual inode deletion and thus some free space may become lost (until we manually call\nfilestore-client findgarbage).",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "84hn4UKgLwN3H8rZbgqFk",
      "type": "rectangle",
      "x": -2061.510200272495,
      "y": -20210.19110223346,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7m",
      "roundness": {
        "type": 3
      },
      "seed": 1102889111,
      "version": 418,
      "versionNonce": 583120855,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "8joyAc68_HtPXbKNNkB8v"
        },
        {
          "id": "5ajxZquafbPBCQ9_wJw3D",
          "type": "arrow"
        }
      ],
      "updated": 1735392502364,
      "link": null,
      "locked": false
    },
    {
      "id": "8joyAc68_HtPXbKNNkB8v",
      "type": "text",
      "x": -2029.4323041543307,
      "y": -20088.524435566793,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7n",
      "roundness": null,
      "seed": 1470535095,
      "version": 404,
      "versionNonce": 748649239,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392483583,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "84hn4UKgLwN3H8rZbgqFk",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "5ajxZquafbPBCQ9_wJw3D",
      "type": "arrow",
      "x": -1604.0102002724948,
      "y": -20066.857768900136,
      "width": 390,
      "height": 3.637978807091713e-12,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7w",
      "roundness": {
        "type": 2
      },
      "seed": 2107729527,
      "version": 41,
      "versionNonce": 1962931095,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392529462,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          390,
          3.637978807091713e-12
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "84hn4UKgLwN3H8rZbgqFk",
        "focus": -0.0057803468208912885,
        "gap": 2.5000000000001137,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "M2EvNAOVkzwbJqwqZXyWI",
        "focus": 0.01086956521736079,
        "gap": 5,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "utv8g8niIbZuMU8U3YGzi",
      "type": "text",
      "x": -1532.3435336058283,
      "y": -20156.857768900136,
      "width": 254.20407104492188,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b7x",
      "roundness": null,
      "seed": 1543574327,
      "version": 42,
      "versionNonce": 579688569,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392512349,
      "link": null,
      "locked": false,
      "text": "creates actor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "creates actor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "M2EvNAOVkzwbJqwqZXyWI",
      "type": "rectangle",
      "x": -1209.0102002724948,
      "y": -20218.5244355668,
      "width": 466.6666666666665,
      "height": 306.6666666666679,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b88",
      "roundness": {
        "type": 3
      },
      "seed": 1258000281,
      "version": 61,
      "versionNonce": 1830468663,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "u_B9jE7ySwyjB6MJaYKO-"
        },
        {
          "id": "5ajxZquafbPBCQ9_wJw3D",
          "type": "arrow"
        }
      ],
      "updated": 1735392529228,
      "link": null,
      "locked": false
    },
    {
      "id": "u_B9jE7ySwyjB6MJaYKO-",
      "type": "text",
      "x": -1072.5309089923842,
      "y": -20087.691102233468,
      "width": 193.7080841064453,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b89",
      "roundness": null,
      "seed": 747390231,
      "version": 12,
      "versionNonce": 1548040855,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392525174,
      "link": null,
      "locked": false,
      "text": "TLinkActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "M2EvNAOVkzwbJqwqZXyWI",
      "originalText": "TLinkActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "31hdftxlYZLoy73dMtc8B",
      "type": "rectangle",
      "x": -2050.6768669391618,
      "y": -19718.52443556681,
      "width": 466.6666666666665,
      "height": 306.6666666666679,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8A",
      "roundness": {
        "type": 3
      },
      "seed": 240871417,
      "version": 150,
      "versionNonce": 1980694969,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "J3wnF98ebJweWTxz1A7mE"
        },
        {
          "id": "pLh1DVSVZhgatqLACKx5j",
          "type": "arrow"
        },
        {
          "id": "-StNoD_qO6ZbUAS07WG4T",
          "type": "arrow"
        }
      ],
      "updated": 1735392771108,
      "link": null,
      "locked": false
    },
    {
      "id": "J3wnF98ebJweWTxz1A7mE",
      "type": "text",
      "x": -1914.1975756590512,
      "y": -19587.69110223348,
      "width": 193.7080841064453,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8B",
      "roundness": null,
      "seed": 847118553,
      "version": 100,
      "versionNonce": 471360153,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392771108,
      "link": null,
      "locked": false,
      "text": "TLinkActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "31hdftxlYZLoy73dMtc8B",
      "originalText": "TLinkActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "pLh1DVSVZhgatqLACKx5j",
      "type": "arrow",
      "x": -1583.0102002724952,
      "y": -19552.218510134182,
      "width": 462.3333333333335,
      "height": 29.21383063301255,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8C",
      "roundness": {
        "type": 2
      },
      "seed": 1636110649,
      "version": 165,
      "versionNonce": 173945,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392771108,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          462.3333333333335,
          -29.21383063301255
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "31hdftxlYZLoy73dMtc8B",
        "focus": 0.16527886881384427,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "ROeiEAxHSuFhqMQfQbphu",
        "focus": 0.1542812254516948,
        "gap": 3.3333333333339397,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "ROeiEAxHSuFhqMQfQbphu",
      "type": "rectangle",
      "x": -1117.3435336058278,
      "y": -19718.524435566796,
      "width": 466.6666666666665,
      "height": 306.6666666666679,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8D",
      "roundness": {
        "type": 3
      },
      "seed": 990027671,
      "version": 175,
      "versionNonce": 1632782425,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "TpQGfpllZdDVCWqZe4r2g"
        },
        {
          "id": "pLh1DVSVZhgatqLACKx5j",
          "type": "arrow"
        }
      ],
      "updated": 1735392690829,
      "link": null,
      "locked": false
    },
    {
      "id": "TpQGfpllZdDVCWqZe4r2g",
      "type": "text",
      "x": -1067.4542615517914,
      "y": -19655.19110223346,
      "width": 366.88812255859375,
      "height": 180,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8E",
      "roundness": null,
      "seed": 181966007,
      "version": 206,
      "versionNonce": 1431760409,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392730939,
      "link": null,
      "locked": false,
      "text": "Shard (id=ShardId)\nguid1 -> target inode\nguid2 -> hardlink ->\ntarget inode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "ROeiEAxHSuFhqMQfQbphu",
      "originalText": "Shard (id=ShardId)\nguid1 -> target inode\nguid2 -> hardlink -> target inode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "KsAcgJ-xO2VT3DOSxVZsf",
      "type": "text",
      "x": -1557.3435336058283,
      "y": -19650.191102233468,
      "width": 401.8440856933594,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8F",
      "roundness": null,
      "seed": 1079561367,
      "version": 63,
      "versionNonce": 1793996313,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392697985,
      "link": null,
      "locked": false,
      "text": "1. CreateNode in shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "1. CreateNode in shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "-StNoD_qO6ZbUAS07WG4T",
      "type": "arrow",
      "x": -1823.7198443975522,
      "y": -19410.857768900143,
      "width": 473.04297745838994,
      "height": 336.57336497668075,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8G",
      "roundness": {
        "type": 2
      },
      "seed": 276664729,
      "version": 143,
      "versionNonce": 2081509465,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392771108,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          473.04297745838994,
          336.57336497668075
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "31hdftxlYZLoy73dMtc8B",
        "focus": 0.4974771138182341,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "YH8quejIsoLeJn7r9fyzV",
        "focus": -0.5051538960570741,
        "gap": 10.000000000000455,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "YH8quejIsoLeJn7r9fyzV",
      "type": "rectangle",
      "x": -1340.6768669391618,
      "y": -19183.524435566804,
      "width": 608.3333333333335,
      "height": 306.6666666666679,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8H",
      "roundness": {
        "type": 3
      },
      "seed": 711497465,
      "version": 254,
      "versionNonce": 1726001975,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "HNdENBphVcHczdNFSlUtg"
        },
        {
          "id": "-StNoD_qO6ZbUAS07WG4T",
          "type": "arrow"
        }
      ],
      "updated": 1735392760795,
      "link": null,
      "locked": false
    },
    {
      "id": "HNdENBphVcHczdNFSlUtg",
      "type": "text",
      "x": -1297.1962964639013,
      "y": -19075.191102233468,
      "width": 521.3721923828125,
      "height": 90,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8I",
      "roundness": null,
      "seed": 1393381337,
      "version": 325,
      "versionNonce": 619918423,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392760795,
      "link": null,
      "locked": false,
      "text": "Main tablet\nlink name -> {ShardId, guid2}",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "YH8quejIsoLeJn7r9fyzV",
      "originalText": "Main tablet\nlink name -> {ShardId, guid2}",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "xmxFH9JQBDt4A3tT5s6M2",
      "type": "text",
      "x": -1625.1595583861015,
      "y": -19349.357768900136,
      "width": 1044.2442016601562,
      "height": 90,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8J",
      "roundness": null,
      "seed": 1451257529,
      "version": 178,
      "versionNonce": 972192343,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735392750807,
      "link": null,
      "locked": false,
      "text": "2. CreateNode in main tablet, ShardId and guid2\n                are passed in the request",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "2. CreateNode in main tablet, ShardId and guid2\n                are passed in the request",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "8bp00ldzI_u7Mt9BT2ow4",
      "type": "text",
      "x": -2097.3435336058283,
      "y": -18811.857768900136,
      "width": 1458.2884521484375,
      "height": 270,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8K",
      "roundness": null,
      "seed": 2021444439,
      "version": 693,
      "versionNonce": 127920569,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1735392932443,
      "link": null,
      "locked": false,
      "text": "Notes:\n* ShardId is selected by TStorageServiceActor to be the same as the id of the\n    shard that holds the target inode\n* ShardName is generated by TLinkActor and passed to the main tablet\n* If TStorageServiceActor or main tablet go down before step 2 is done, target\n    inode will never get to RefCount==0 without manual intervention",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Notes:\n* ShardId is selected by TStorageServiceActor to be the same as the id of the\n    shard that holds the target inode\n* ShardName is generated by TLinkActor and passed to the main tablet\n* If TStorageServiceActor or main tablet go down before step 2 is done, target\n    inode will never get to RefCount==0 without manual intervention",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "NKpWoezuqIu-J8GHf-GZe",
      "type": "text",
      "x": -2118.06913988838,
      "y": -18367.274435566796,
      "width": 1527.1566162109375,
      "height": 270,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8L",
      "roundness": null,
      "seed": 173626711,
      "version": 1431,
      "versionNonce": 1512662233,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393112280,
      "link": null,
      "locked": false,
      "text": "RenameNode is a simple main tablet-only operation in most of the cases - unless the\ntarget Name is already occupied. In that case RenameNode op needs to decrease\nRefCount of the inode that was referenced by that name and, in most of the cases,\nthat inode's RefCount goes to 0 and, thus, that inode needs to be deleted. In this\ncase RenameNode actually works in a similar way to UnlinkNode, so I'll focus only on\nUnlinkNode here.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "RenameNode is a simple main tablet-only operation in most of the cases - unless the\ntarget Name is already occupied. In that case RenameNode op needs to decrease\nRefCount of the inode that was referenced by that name and, in most of the cases,\nthat inode's RefCount goes to 0 and, thus, that inode needs to be deleted. In this\ncase RenameNode actually works in a similar way to UnlinkNode, so I'll focus only on\nUnlinkNode here.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "iroKmUjWgk83mwO_GLLfV",
      "type": "text",
      "x": -2124.735806555046,
      "y": -18463.10776890014,
      "width": 329.04412841796875,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8M",
      "roundness": null,
      "seed": 827495031,
      "version": 616,
      "versionNonce": 370742871,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393013247,
      "link": null,
      "locked": false,
      "text": "Node unlink/rename",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Node unlink/rename",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "fn3aDPa_MDqP-np_s-5s_",
      "type": "rectangle",
      "x": -2119.492316971713,
      "y": -18039.35776890013,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8N",
      "roundness": {
        "type": 3
      },
      "seed": 1300625945,
      "version": 160,
      "versionNonce": 25917177,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "LNCc1XyshtH1vq40DkDsV"
        },
        {
          "id": "MNSig7iN6oqJenU6SonYf",
          "type": "arrow"
        }
      ],
      "updated": 1735393159652,
      "link": null,
      "locked": false
    },
    {
      "id": "LNCc1XyshtH1vq40DkDsV",
      "type": "text",
      "x": -2087.414420853549,
      "y": -17917.69110223346,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8O",
      "roundness": null,
      "seed": 1859211001,
      "version": 115,
      "versionNonce": 47460313,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393159652,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "fn3aDPa_MDqP-np_s-5s_",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "qPi8YWv_fWjyuLlUWBAZ6",
      "type": "rectangle",
      "x": -1360.325650305046,
      "y": -18050.19110223347,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8P",
      "roundness": {
        "type": 3
      },
      "seed": 2040465369,
      "version": 204,
      "versionNonce": 833277337,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "m6mtiT3WAvVcxQxMLQU4_"
        },
        {
          "id": "MNSig7iN6oqJenU6SonYf",
          "type": "arrow"
        }
      ],
      "updated": 1735393159652,
      "link": null,
      "locked": false
    },
    {
      "id": "m6mtiT3WAvVcxQxMLQU4_",
      "type": "text",
      "x": -1236.0376864378586,
      "y": -17928.524435566804,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8Q",
      "roundness": null,
      "seed": 1476568249,
      "version": 171,
      "versionNonce": 772780665,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393159652,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "qPi8YWv_fWjyuLlUWBAZ6",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "MNSig7iN6oqJenU6SonYf",
      "type": "arrow",
      "x": -1664.492316971713,
      "y": -17899.35776890013,
      "width": 299.9999999999998,
      "height": 0,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8X",
      "roundness": {
        "type": 2
      },
      "seed": 1336336089,
      "version": 338,
      "versionNonce": 1743685879,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393160099,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          299.9999999999998,
          0
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "fn3aDPa_MDqP-np_s-5s_",
        "focus": -0.028901734104054413,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "qPi8YWv_fWjyuLlUWBAZ6",
        "focus": -0.046242774566532474,
        "gap": 4.166666666667311,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "FV2a3vJlcmshtliHUgcBp",
      "type": "text",
      "x": -1597.825650305047,
      "y": -17982.691102233457,
      "width": 179.82406616210938,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8Y",
      "roundness": null,
      "seed": 1828166585,
      "version": 129,
      "versionNonce": 170824695,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393168831,
      "link": null,
      "locked": false,
      "text": "UnlinkNode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "UnlinkNode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "79k1lc8aLOhiy1tGXU6Q-",
      "type": "text",
      "x": -2124.4923169717135,
      "y": -17639.35776890013,
      "width": 1584.720458984375,
      "height": 225,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8Z",
      "roundness": null,
      "seed": 517848217,
      "version": 1053,
      "versionNonce": 1589333335,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393268196,
      "link": null,
      "locked": false,
      "text": "Once again, if DirectoryCreationInShardsEnabled flag is on, main tablet role is taken\nby the shard that is in charge of the parent directory.\n\nUnlike CreateNode, no shard balancing should be done - the shard that takes\npart in the operation is the shard that holds the inode referenced by the unlinked name.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Once again, if DirectoryCreationInShardsEnabled flag is on, main tablet role is taken\nby the shard that is in charge of the parent directory.\n\nUnlike CreateNode, no shard balancing should be done - the shard that takes\npart in the operation is the shard that holds the inode referenced by the unlinked name.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "e6AVj9-ifhAZt6BOFR__X",
      "type": "rectangle",
      "x": -2131.849433670931,
      "y": -17325.19110223346,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8o",
      "roundness": {
        "type": 3
      },
      "seed": 619481529,
      "version": 424,
      "versionNonce": 219079671,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "9SM12EpktkNnDPTpjImsw"
        },
        {
          "id": "QqQWr70YCtdWoYgfbAyxK",
          "type": "arrow"
        }
      ],
      "updated": 1735393295131,
      "link": null,
      "locked": false
    },
    {
      "id": "9SM12EpktkNnDPTpjImsw",
      "type": "text",
      "x": -2007.5614698037434,
      "y": -17203.524435566793,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8p",
      "roundness": null,
      "seed": 637856409,
      "version": 389,
      "versionNonce": 1872579863,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393295131,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "e6AVj9-ifhAZt6BOFR__X",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "2BZQ_oFRndgHy5AgwLmqZ",
      "type": "rectangle",
      "x": -1945.1827670042649,
      "y": -16915.19110223346,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8q",
      "roundness": {
        "type": 3
      },
      "seed": 723398521,
      "version": 670,
      "versionNonce": 1868575575,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "09GpCZW8ulCS7JQqDOdCw"
        }
      ],
      "updated": 1735393295131,
      "link": null,
      "locked": false
    },
    {
      "id": "09GpCZW8ulCS7JQqDOdCw",
      "type": "text",
      "x": -1767.5067950194016,
      "y": -16793.524435566793,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8r",
      "roundness": null,
      "seed": 1249630297,
      "version": 645,
      "versionNonce": 1305325687,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393295131,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "2BZQ_oFRndgHy5AgwLmqZ",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "QqQWr70YCtdWoYgfbAyxK",
      "type": "arrow",
      "x": -1669.492316971713,
      "y": -17187.69110223346,
      "width": 483.33333333333326,
      "height": 3.3333333333321207,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8t",
      "roundness": {
        "type": 2
      },
      "seed": 1491228185,
      "version": 576,
      "versionNonce": 1157802137,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393295570,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          483.33333333333326,
          -3.3333333333321207
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "e6AVj9-ifhAZt6BOFR__X",
        "focus": -0.03463094329052955,
        "gap": 7.357116699217954,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "hyF04hTiBYi0oUsvrm9WK",
        "focus": 0.3403170158507822,
        "gap": 3.3333333333332575,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "kT6GM84On4apqyx3-JTjF",
      "type": "text",
      "x": -1641.15898363838,
      "y": -17272.69110223346,
      "width": 404.16815185546875,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8u",
      "roundness": null,
      "seed": 104999673,
      "version": 217,
      "versionNonce": 974695193,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393299707,
      "link": null,
      "locked": false,
      "text": "LocalDB UnlinkNode tx",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "LocalDB UnlinkNode tx",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "hyF04hTiBYi0oUsvrm9WK",
      "type": "rectangle",
      "x": -1182.8256503050466,
      "y": -17342.69110223346,
      "width": 446.6666666666665,
      "height": 456.66666666666424,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8v",
      "roundness": {
        "type": 3
      },
      "seed": 647259097,
      "version": 205,
      "versionNonce": 1221349335,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "ur3cPSAgD9wDrqYCLkEkV"
        },
        {
          "id": "QqQWr70YCtdWoYgfbAyxK",
          "type": "arrow"
        }
      ],
      "updated": 1735393295131,
      "link": null,
      "locked": false
    },
    {
      "id": "ur3cPSAgD9wDrqYCLkEkV",
      "type": "text",
      "x": -1174.2643659219086,
      "y": -17249.35776890013,
      "width": 429.5440979003906,
      "height": 270,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8w",
      "roundness": null,
      "seed": 1978433721,
      "version": 357,
      "versionNonce": 1087575159,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393319903,
      "link": null,
      "locked": false,
      "text": "1. Modifies NodeRefs\nand DupCache, but not\nNodes\n2. Appends UnlinkNode in\nshard request to the\nOpLog table",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "hyF04hTiBYi0oUsvrm9WK",
      "originalText": "1. Modifies NodeRefs and DupCache, but not Nodes\n2. Appends UnlinkNode in shard request to the OpLog table",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "9XarISRHE87e1oHGYmIXq",
      "type": "text",
      "x": -2127.6232170368176,
      "y": -16571.85776890013,
      "width": 1614.960693359375,
      "height": 135,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8x",
      "roundness": null,
      "seed": 1642987929,
      "version": 914,
      "versionNonce": 726832919,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393422350,
      "link": null,
      "locked": false,
      "text": "Name is deleted from the main tablet's NodeRefs. Now we need to attempt UnlinkNode\nrequest in the shard until it completes successfully. Just like in the CreateNode scenario.\n",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Name is deleted from the main tablet's NodeRefs. Now we need to attempt UnlinkNode\nrequest in the shard until it completes successfully. Just like in the CreateNode scenario.\n",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "lNBy_sCoyAH6jUrDAgyS4",
      "type": "rectangle",
      "x": -2022.3375419879894,
      "y": -16396.441102233457,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8y",
      "roundness": {
        "type": 3
      },
      "seed": 1473013369,
      "version": 517,
      "versionNonce": 1121659063,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "KdGJ_pLXQf1hpoxs538Q3"
        },
        {
          "id": "0PFaD2JPlgOyb8w-v84EN",
          "type": "arrow"
        }
      ],
      "updated": 1735393333125,
      "link": null,
      "locked": false
    },
    {
      "id": "KdGJ_pLXQf1hpoxs538Q3",
      "type": "text",
      "x": -1898.049578120802,
      "y": -16274.77443556679,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b8z",
      "roundness": null,
      "seed": 1380659033,
      "version": 481,
      "versionNonce": 1426258391,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393333125,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "lNBy_sCoyAH6jUrDAgyS4",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "fydDaiwKghEUI05_GPgx2",
      "type": "rectangle",
      "x": -1835.6708753213225,
      "y": -15984.7744355668,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b90",
      "roundness": {
        "type": 3
      },
      "seed": 666754105,
      "version": 763,
      "versionNonce": 1934733335,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "YoJF6iQeQEER9x6KASRLA"
        },
        {
          "id": "0PFaD2JPlgOyb8w-v84EN",
          "type": "arrow"
        }
      ],
      "updated": 1735393333125,
      "link": null,
      "locked": false
    },
    {
      "id": "YoJF6iQeQEER9x6KASRLA",
      "type": "text",
      "x": -1657.9949033364592,
      "y": -15863.107768900132,
      "width": 99.64805603027344,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b91",
      "roundness": null,
      "seed": 403172633,
      "version": 738,
      "versionNonce": 2012321079,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393333125,
      "link": null,
      "locked": false,
      "text": "Shard",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "fydDaiwKghEUI05_GPgx2",
      "originalText": "Shard",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "0PFaD2JPlgOyb8w-v84EN",
      "type": "arrow",
      "x": -1794.492316971713,
      "y": -16109.357768900129,
      "width": 170.95720710101614,
      "height": 121.66666666666788,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b92",
      "roundness": {
        "type": 2
      },
      "seed": 446489081,
      "version": 645,
      "versionNonce": 1922828825,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393333306,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          170.95720710101614,
          121.66666666666788
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "lNBy_sCoyAH6jUrDAgyS4",
        "focus": 0.4661328231263589,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "fydDaiwKghEUI05_GPgx2",
        "focus": 0.44482406952457404,
        "gap": 2.9166666666606034,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "jaOLBaEAEFXtM1w4PHRXg",
      "type": "text",
      "x": -1642.8256503050466,
      "y": -16074.357768900123,
      "width": 179.82406616210938,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b93",
      "roundness": null,
      "seed": 1820343001,
      "version": 233,
      "versionNonce": 1694077655,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393428283,
      "link": null,
      "locked": false,
      "text": "UnlinkNode",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "UnlinkNode",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "lOUam1c8Ppp5JCmmZde5q",
      "type": "rectangle",
      "x": -2035.325650305047,
      "y": -15558.524435566791,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b95",
      "roundness": {
        "type": 3
      },
      "seed": 1645222041,
      "version": 625,
      "versionNonce": 742211511,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "DsN1PBGNBlKZzC5NkMYfC"
        },
        {
          "id": "eR-gYgniag6I0ocwhKsNW",
          "type": "arrow"
        },
        {
          "id": "xlNSsiBDu_Lg3aoRlA2Tp",
          "type": "arrow"
        }
      ],
      "updated": 1735393448258,
      "link": null,
      "locked": false
    },
    {
      "id": "DsN1PBGNBlKZzC5NkMYfC",
      "type": "text",
      "x": -1911.0376864378595,
      "y": -15436.857768900123,
      "width": 206.424072265625,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b96",
      "roundness": null,
      "seed": 1502846329,
      "version": 589,
      "versionNonce": 403321047,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393448258,
      "link": null,
      "locked": false,
      "text": "Main tablet",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "lOUam1c8Ppp5JCmmZde5q",
      "originalText": "Main tablet",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "gweDUZs3abtfEuI3igK0l",
      "type": "rectangle",
      "x": -1253.65898363838,
      "y": -15595.19110223347,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b97",
      "roundness": {
        "type": 3
      },
      "seed": 605259353,
      "version": 908,
      "versionNonce": 1611672631,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "A0rV_umaQRFG_Ifg0guKZ"
        },
        {
          "id": "eR-gYgniag6I0ocwhKsNW",
          "type": "arrow"
        }
      ],
      "updated": 1735393448258,
      "link": null,
      "locked": false
    },
    {
      "id": "A0rV_umaQRFG_Ifg0guKZ",
      "type": "text",
      "x": -1213.9850334430676,
      "y": -15473.524435566802,
      "width": 375.652099609375,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b98",
      "roundness": null,
      "seed": 1818448697,
      "version": 943,
      "versionNonce": 481033145,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735394206621,
      "link": null,
      "locked": false,
      "text": "Removes OpLog entry",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "gweDUZs3abtfEuI3igK0l",
      "originalText": "Removes OpLog entry",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "eR-gYgniag6I0ocwhKsNW",
      "type": "arrow",
      "x": -1577.4804252887716,
      "y": -15419.774435566798,
      "width": 320.90477498372775,
      "height": 49.075060678111186,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b99",
      "roundness": {
        "type": 2
      },
      "seed": 921076761,
      "version": 1059,
      "versionNonce": 611441753,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393448487,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          320.90477498372775,
          -49.075060678111186
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "lOUam1c8Ppp5JCmmZde5q",
        "focus": 0.16657229442812235,
        "gap": 2.845225016275549,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "gweDUZs3abtfEuI3igK0l",
        "focus": 0.2965061605929399,
        "gap": 2.9166666666639003,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "ngKCSo0BWQFE-blYKcgZM",
      "type": "text",
      "x": -1519.4923169717135,
      "y": -15519.357768900134,
      "width": 208.65206909179688,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9A",
      "roundness": null,
      "seed": 798005497,
      "version": 258,
      "versionNonce": 382261431,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393448258,
      "link": null,
      "locked": false,
      "text": "LocalDB tx",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "LocalDB tx",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "SECEorAbU4MdQBLrVHiF1",
      "type": "rectangle",
      "x": -2046.992316971714,
      "y": -15106.857768900134,
      "width": 454.9999999999998,
      "height": 288.33333333333576,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9B",
      "roundness": {
        "type": 3
      },
      "seed": 937759193,
      "version": 835,
      "versionNonce": 1069197783,
      "isDeleted": false,
      "boundElements": [
        {
          "type": "text",
          "id": "ihw13ZIY-u46Tv8IZ8D_Q"
        },
        {
          "id": "xlNSsiBDu_Lg3aoRlA2Tp",
          "type": "arrow"
        }
      ],
      "updated": 1735393448258,
      "link": null,
      "locked": false
    },
    {
      "id": "ihw13ZIY-u46Tv8IZ8D_Q",
      "type": "text",
      "x": -2014.91442085355,
      "y": -14985.191102233466,
      "width": 390.8442077636719,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9C",
      "roundness": null,
      "seed": 888630969,
      "version": 834,
      "versionNonce": 1217746679,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393448258,
      "link": null,
      "locked": false,
      "text": "TStorageServiceActor",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "SECEorAbU4MdQBLrVHiF1",
      "originalText": "TStorageServiceActor",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "xlNSsiBDu_Lg3aoRlA2Tp",
      "type": "arrow",
      "x": -1811.15898363838,
      "y": -15271.024435566798,
      "width": 25,
      "height": 170,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9D",
      "roundness": {
        "type": 2
      },
      "seed": 493563801,
      "version": 763,
      "versionNonce": 1747409433,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393448487,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -25,
          170
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "lOUam1c8Ppp5JCmmZde5q",
        "focus": -0.0713511382674644,
        "gap": 1,
        "fixedPoint": null
      },
      "endBinding": {
        "elementId": "SECEorAbU4MdQBLrVHiF1",
        "focus": -0.14881245688380484,
        "gap": 1,
        "fixedPoint": null
      },
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "elbowed": false
    },
    {
      "id": "CFmP-791CudaMads_WRpS",
      "type": "text",
      "x": -1791.15898363838,
      "y": -15214.357768900134,
      "width": 337.2160949707031,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9E",
      "roundness": null,
      "seed": 1198773369,
      "version": 287,
      "versionNonce": 126235545,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393454377,
      "link": null,
      "locked": false,
      "text": "UnlinkNodeResponse",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "UnlinkNodeResponse",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "krOTY6PrK8VTh1k-VkXCC",
      "type": "text",
      "x": -2111.824592362339,
      "y": -14712.691102233457,
      "width": 1619.3885498046875,
      "height": 135,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9F",
      "roundness": null,
      "seed": 1993661785,
      "version": 1213,
      "versionNonce": 1795565847,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393487913,
      "link": null,
      "locked": false,
      "text": "If UnlinkNode in shard request fails, it's retried until it succeeds. If main tablet reboots,\nit reads OpLog into its memory and again retries all shard requests until they\nsucceed.",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "If UnlinkNode in shard request fails, it's retried until it succeeds. If main tablet reboots,\nit reads OpLog into its memory and again retries all shard requests until they\nsucceed.",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "SgJDM3nl7-1EEb7jpg_o_",
      "type": "text",
      "x": -2116.8655978148126,
      "y": -14529.357768900134,
      "width": 659.9642333984375,
      "height": 45,
      "angle": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9H",
      "roundness": null,
      "seed": 1535712919,
      "version": 720,
      "versionNonce": 2005168345,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393535233,
      "link": null,
      "locked": false,
      "text": "ListNodes, GetNodeAttr and the like",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "ListNodes, GetNodeAttr and the like",
      "autoResize": true,
      "lineHeight": 1.25
    },
    {
      "id": "fJbud1JdgbOvF5Kxfwccv",
      "type": "text",
      "x": -2110.371141841506,
      "y": -14441.024435566802,
      "width": 1788.232421875,
      "height": 945,
      "angle": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffffff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "frameId": null,
      "index": "b9I",
      "roundness": null,
      "seed": 171676537,
      "version": 3005,
      "versionNonce": 1327897751,
      "isDeleted": false,
      "boundElements": [],
      "updated": 1735393944160,
      "link": null,
      "locked": false,
      "text": "Node attributes are stored in shards for the inodes that are managed by the shards. So\nGetNodeAttr / GetNodeXAttr requests without the Name parameter (i.e. request that\nexplicitly specify target NodeId) go directly to the shards. Requests that specify the\nparent NodeId + child Name pair first go through the main tablet which returns the\n{ShardId, NameInShard} pair to TStorageServiceActor which then sends the request to\nthe right shard.\n\nListNodes is a bit more tricky since it actually needs not only to list the names of the files,\nbut to fetch node stat (i.e. GetNodeAttr results). We have a special GetNodeAttrBatch\nmethod which allows to fetch stat info for multiple files at the same time. So ListNodes\nis generally processed by TStorageServiceActor in the following 2 steps:\n1. ListNodes in main tablet - returns Names for the nodes under parent NodeId, returns stat\n    info for the nodes managed directly by the main tablet (these are mostly directories\n    and symlinks) and returns {ShardId, NameInShard} pairs for external nodes\n2. {ShardId, NameInShard} pairs are grouped by ShardId and GetNodeAttrBatch requests\n    are sent to shards\n\nThere is also a chance of UnlinkNode/RenameNode request completing between the 2 aforementioned\nsteps. ListNodes logic in TStorageServiceActor does some extra steps if such a race is detected\nto verify that the nodes for which GetNodeAttrBatch returns ENOENT were actually deleted\nby the user and not just lost due to some bug.  ",
      "fontSize": 36,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "Node attributes are stored in shards for the inodes that are managed by the shards. So\nGetNodeAttr / GetNodeXAttr requests without the Name parameter (i.e. request that\nexplicitly specify target NodeId) go directly to the shards. Requests that specify the\nparent NodeId + child Name pair first go through the main tablet which returns the\n{ShardId, NameInShard} pair to TStorageServiceActor which then sends the request to\nthe right shard.\n\nListNodes is a bit more tricky since it actually needs not only to list the names of the files,\nbut to fetch node stat (i.e. GetNodeAttr results). We have a special GetNodeAttrBatch\nmethod which allows to fetch stat info for multiple files at the same time. So ListNodes\nis generally processed by TStorageServiceActor in the following 2 steps:\n1. ListNodes in main tablet - returns Names for the nodes under parent NodeId, returns stat\n    info for the nodes managed directly by the main tablet (these are mostly directories\n    and symlinks) and returns {ShardId, NameInShard} pairs for external nodes\n2. {ShardId, NameInShard} pairs are grouped by ShardId and GetNodeAttrBatch requests\n    are sent to shards\n\nThere is also a chance of UnlinkNode/RenameNode request completing between the 2 aforementioned\nsteps. ListNodes logic in TStorageServiceActor does some extra steps if such a race is detected\nto verify that the nodes for which GetNodeAttrBatch returns ENOENT were actually deleted\nby the user and not just lost due to some bug.  ",
      "autoResize": true,
      "lineHeight": 1.25
    }
  ],
  "appState": {
    "gridSize": 20,
    "gridStep": 5,
    "gridModeEnabled": false,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}