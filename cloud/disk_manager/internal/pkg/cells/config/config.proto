syntax = "proto2";

package cells;

import "google/protobuf/duration.proto";

option go_package = "github.com/ydb-platform/nbs/cloud/disk_manager/internal/pkg/cells/config";

////////////////////////////////////////////////////////////////////////////////

enum CellSelectionPolicy {
    CELL_SELECTION_POLICY_FIRST_IN_CONFIG = 0;
    CELL_SELECTION_POLICY_LEAST_OCCUPIED = 1;
}

message ZoneCells {
    repeated string Cells = 1;
}

message CellsConfig {
    // Mapping from zone ID to cell ID.
    map<string, ZoneCells> Cells = 1;

    repeated string FolderDenyList = 2;

    // If empty, every folder is included.
    repeated string FolderAllowList = 3;

    optional string StorageFolder = 4 [default = "cells"];

    optional bool ScheduleCollectClusterCapacityTask = 5 [default = false];

    // CollectClusterCapacity is a heavy request, so we should use it rarely.
    optional string CollectClusterCapacityTaskScheduleInterval = 6 [default = "1h"];

    // Default is 90 days. Can be set only in hours, because time.ParseDuration
    // can't parse days.
    optional string ClusterCapacityExpirationTimeout = 7 [default = "2160h"];
    
    optional CellSelectionPolicy CellSelectionPolicy = 8;
}
